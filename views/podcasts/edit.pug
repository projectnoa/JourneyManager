extends ../layout

block head-content
  link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.1.2/css/tempusdominus-bootstrap-4.min.css", integrity="sha512-PMjWzHVtwxdq7m7GIxBot5vdxUY+5aKP9wpKtvnNBZrVv1srI8tU6xvFMzG8crLNcMj/8Xl/WWmo/oAP/40p1g==", crossorigin="anonymous")
  script(src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.1.2/js/tempusdominus-bootstrap-4.min.js", integrity="sha512-2JBCbWoMJPH+Uj7Wq5OLub8E5edWHlTM4ar/YJkZh3plwB2INhhOC3eDoqHm1Za/ZOSksrLlURLoyXVdfQXqwg==", crossorigin="anonymous")

  script(src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.2/jquery.validate.min.js", integrity="sha512-UdIMMlVx0HEynClOIFSyOrPggomfhBKJE28LKl8yR3ghkgugPnG6iLfRfHwushZl1MOPSY6TsuBDGPK2X4zYKg==", crossorigin="anonymous")

  script(src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/trumbowyg.min.js", integrity="sha512-sffB9/tXFFTwradcJHhojkhmrCj0hWeaz8M05Aaap5/vlYBfLx5Y7woKi6y0NrqVNgben6OIANTGGlojPTQGEw==", crossorigin="anonymous")
  link(rel="stylesheet",href="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/ui/trumbowyg.min.css", integrity="sha512-iw/TO6rC/bRmSOiXlanoUCVdNrnJBCOufp2s3vhTPyP1Z0CtTSBNbEd5wIo8VJanpONGJSyPOZ5ZRjZ/ojmc7g==", crossorigin="anonymous")

  link(rel="stylesheet" href="/css/podcasts.css")
  script(src="/js/podcasts.js")

  link(rel="stylesheet" href="/css/validation.css")
  script(src="/js/validation.js")

  meta(name="page-id", content="editPodcast")

block layout-content
  h1.mt-5.text-white.text-center Edit a podcast episode
  br

  div.row
    div.col-xl-6.offset-xl-3.col-lg-8.offset-lg-2.col-10.offset-1
      div.card.p-3
        div.card-text
          form(action=`/podcasts/${item.id}/update`, method="post", enctype="multipart/form-data")
            input(type="hidden", name="id", value=`${item.id}`)
            div.form-group
                label(for='title') Title
                input.form-control(type="text", value=`${item.title}`, name="title", placeholder="Enter an episode title", required=true)
            div.form-group
                label(for='description') Description
                textarea.form-control(name="description", placeholder="Enter the episode description", required=true)=item.description
            div.form-group
                label(for='keywords') Keywords
                input.form-control(type="text", name="keywords", value=`${item.keywords}`, placeholder="Enter some keywords separated by comma", required=true)
                small.form-text.text-muted Example: Mental health, Habits, Success.
            div.form-group
                div.row
                    div.col-lg-6
                        label(for='season') Season
                        -var selected = false;
                        select.form-control(name='season')
                          each op in [...Array(10).keys()].map(x => ++x)
                            -if (item.season == op) {
                              -selected=true;
                            -} else {
                              -selected=false;
                            -}
                            option(value=op selected=selected) #{op}
                            
                    div.col-lg-6
                        label(for='episode') Episode
                        -var selected = false;
                        select.form-control(name='episode')
                          each op in [...Array(100).keys()].map(x => ++x)
                            -if (item.episode == op) {
                              -selected=true;
                            -} else {
                              -selected=false;
                            -}
                            option(value=op selected=selected) #{op}
            div.form-check
                input.form-check-input(type="checkbox", name="explicit", checked=item.explicit)
                label.form-check-label(for='explicit') Is explicit?
            div.form-group
                label.sr-only(for='file') Podcast file
                input.form-control-file.text-primary.font-weight-bold(type="file", name="file", data-title="Drop episode here", data-behavior='file-upload', required=false)
                input(type="hidden", name="length")
                input(type="hidden", name="duration")
            br
            center
              input.btn.btn-md.btn-primary.px-4(type="submit", value="Update")
